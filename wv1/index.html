<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wilderness Survival</title>
    <link rel="stylesheet" href="css/styles.css"> <!-- Link to your CSS -->
    <!-- Inline styles removed -->
</head>
<body>
    <!-- Settings Menu (Initially Visible) -->
    <div id="settings-menu" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: white; z-index: 5000; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: Arial, sans-serif; padding: 20px; overflow-y: auto;">
        <h2>Game Settings</h2>
        <div style="display: grid; grid-template-columns: auto auto; gap: 10px 20px; margin-bottom: 25px; max-width: 500px;">
            <label for="setting-map-height">Map Height Scale:</label>
            <input type="range" id="setting-map-height" min="0.5" max="2.0" step="0.1" value="1.0">

            <label for="setting-hunters">Max Hunters:</label>
            <input type="number" id="setting-hunters" min="0" max="20" value="5">

            <label for="setting-animals">Max Animals:</label>
            <input type="number" id="setting-animals" min="10" max="1000" value="600">

            <label for="setting-trees">Max Trees:</label>
            <input type="number" id="setting-trees" min="100" max="3000" value="1000">

            <label for="setting-rocks">Max Rocks/Ore:</label>
            <input type="number" id="setting-rocks" min="100" max="2000" value="800">

            <label for="setting-fiber">Max Plants:</label>
            <input type="number" id="setting-fiber" min="100" max="4000" value="1500">

            <label for="setting-always-sunny">Always Sunny:</label>
            <input type="checkbox" id="setting-always-sunny">

            <label for="setting-rain-chance">Rain Chance (%):</label>
            <input type="range" id="setting-rain-chance" min="0" max="100" step="5" value="20">
        </div>
        <button id="start-game-button" style="padding: 15px 30px; font-size: 20px; cursor: pointer;">Start Game</button>
    </div>
    <!-- End Settings Menu -->

    <canvas id="game-canvas"></canvas>

    <div id="ui-container">
        <!-- Stats -->
        <div id="stats">
            <div class="stat-bar" title="Health"><div id="health-fill" class="stat-fill" style="width: 100%;"></div></div>
            <div class="stat-bar" title="Hunger"><div id="hunger-fill" class="stat-fill" style="width: 100%;"></div></div>
            <div class="stat-bar" title="Stamina"><div id="stamina-fill" class="stat-fill" style="width: 100%;"></div></div>
        </div>

        <!-- Quick Bar -->
        <div id="quick-bar">
            <!-- Quick slots generated by InventoryUI or hardcoded as before -->
            <div class="quick-slot" data-slot="0"></div> <div class="quick-slot" data-slot="1"></div>
            <div class="quick-slot" data-slot="2"></div> <div class="quick-slot" data-slot="3"></div>
            <div class="quick-slot" data-slot="4"></div> <div class="quick-slot" data-slot="5"></div>
            <div class="quick-slot" data-slot="6"></div> <div class="quick-slot" data-slot="7"></div>
        </div>

        <!-- Weapon Stats Display -->
        <div id="weapon-stats">
            <!-- Content updated by UIManager.updateWeaponUI -->
        </div>

        <!-- Inventory Panel -->
        <div id="inventory">
             <h3>Inventory</h3>
             <div id="inventory-grid">
                 <!-- Slots generated by InventoryUI -->
             </div>
        </div>

        <!-- Build Menu Panel -->
        <div id="build-menu">
             <h3>Build Menu</h3>
             <div class="build-items">
                 <!-- Items generated by BuildingUI -->
             </div>
        </div>

        <!-- Crafting Menu Panel -->
        <div id="crafting-menu">
             <h3 id="crafting-title">Crafting</h3>
             <div id="crafting-items">
                 <!-- Items generated by UIManager -->
             </div>
        </div>

        <!-- Debug Controls Panel -->
        <div id="debug-controls" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 5px; display: none; pointer-events: auto; z-index: 200;">
            <h4>Debug Controls (`)</h4>
            <div style="margin-bottom: 5px;">
                <label for="debug-time-of-day" style="display: block; font-size: 12px;">Time of Day:</label>
                <input type="range" id="debug-time-of-day" min="0" max="1" step="0.01" value="0.5" style="width: 150px;">
                <span id="debug-time-value" style="font-size: 11px;">0.50</span>
            </div>
            <div style="margin-bottom: 5px;">
                <label for="debug-sun-intensity" style="display: block; font-size: 12px;">Sun Intensity:</label>
                <input type="range" id="debug-sun-intensity" min="0" max="2" step="0.05" value="1.2" style="width: 150px;">
                <span id="debug-sun-value" style="font-size: 11px;">1.20</span>
            </div>
            <div>
                <label for="debug-ambient-intensity" style="display: block; font-size: 12px;">Ambient Intensity:</label>
                <input type="range" id="debug-ambient-intensity" min="0" max="1.5" step="0.05" value="0.8" style="width: 150px;">
                <span id="debug-ambient-value" style="font-size: 11px;">0.80</span>
            </div>
        </div>

        <!-- Notification Area -->
        <div id="notification"></div>

        <!-- Other UI Placeholders -->
        <div id="interaction-prompt"></div>
        <div id="death-screen"> <!-- Added Respawn Button -->
             <h1>YOU DIED</h1>
             <button id="respawn-button">Respawn</button>
        </div>
        <div id="pause-menu"> <!-- Added Save/Load -->
             <h2>Paused</h2>
             <button id="resume-button">Resume</button>
             <button id="save-button">Save Game</button>
             <button id="load-button">Load Game</button>
             <button id="main-menu-button">Main Menu</button> <!-- Optional -->
        </div>

        <!-- <<-- ADDED: Save/Load Buttons outside menus (optional) -->> -->
        <div id="save-load-buttons">
            <button id="quick-save-button">Quick Save</button>
            <button id="quick-load-button">Quick Load</button>
        </div>
        <!-- <<-- END ADD -->>

    </div>

    <!-- Scripts (Corrected Order) -->
    <script src="js/lib/three.min.js"></script>
    <!-- ADD OBJLoader SCRIPT HERE -->
    <script src="js/lib/loaders/OBJLoader.js"></script> <!-- Adjust path as needed -->
    <!-- END ADD -->
    <script src="js/Constants.js"></script>
    <script src="js/Utils.js"></script> <!-- Defines SimplexNoise -->
    <script src="js/ObjectPool.js"></script>
    <script src="js/AssetLoader.js"></script> <!-- Now uses OBJLoader -->
    <script src="js/Terrain.js"></script> <!-- Uses Constants, Utils, AssetLoader, THREE -->
    <script src="js/Inventory.js"></script> <!-- Uses Constants -->
    <script src="js/CharacterStats.js"></script> <!-- Uses Constants, Utils -->
    <script src="js/CraftingSystem.js"></script> <!-- Uses Constants, Inventory -->
    <script src="js/BuildingSystem.js"></script> <!-- Uses Constants, Inventory, Utils, AssetLoader, THREE -->
    <script src="js/Animal.js"></script> <!-- Needs Constants, Utils, THREE, AssetLoader -->
    <script src="js/AIHunter.js"></script> <!-- Needs Constants, Utils, THREE, Terrain -->
    <script src="js/EntityManager.js"></script> <!-- Needs Animal, AIHunter, Constants -->
    <script src="js/ResourceManager.js"></script> <!-- Needs Constants, Utils, AssetLoader, THREE -->
    <script src="js/Weather.js"></script> <!-- Needs Constants, Utils, THREE -->
    <script src="js/NetworkManager.js"></script> <!-- Needs THREE -->
    <!-- UI Components -->
    <script src="js/InventoryUI.js"></script> <!-- Needs Inventory -->
    <script src="js/BuildingUI.js"></script> <!-- Needs BuildingSystem, Inventory -->
    <script src="js/UIManager.js"></script> <!-- Needs UI components, Inventory, BuildingSystem, CraftingSystem -->
    <!-- PlayerController depends on many systems -->
    <script src="js/PlayerController.js"></script> <!-- Needs Constants, Utils, THREE, Inventory, CharacterStats, UIManager -->
    <script src="js/WorldGenerator.js"></script> <!-- Needs Terrain, ResourceManager, EntityManager, Constants, AssetLoader -->
    <!-- Game depends on ALL system classes -->
    <script src="js/Game.js"></script>
    <!-- main.js initializes Game -->
    <script src="js/main.js"></script> <!-- MUST be last -->

</body>
</html>